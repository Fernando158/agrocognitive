{% extends "base.html" %}
{% block style %}
  {{block.super}}
  	<!-- Fonts and Icons -->
	<link href="{{ STATIC_URL }}css/bootstrap.min.css" rel="stylesheet" />
	<link href="{{ STATIC_URL }}css/paper-bootstrap-wizard.css" rel="stylesheet" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.1.3/cropper.css">
{% endblock style%}
{% block content %}

<div class="content">
	        <div class="row">
		        <div class="col-sm-12">

		            <!--      Wizard container        -->
		            <div class="wizard-container">

		                <div class="card wizard-card" data-color="orange" id="wizardProfile">
		                    <form action="" method="">
		                <!--        You can switch " data-color="orange" "  with one of the next bright colors: "blue", "green", "orange", "red", "azure"          -->

		                    	<div class="wizard-header text-center">
		                        	<h3 class="wizard-title">Solicitar Monitoreo</h3>
									<p class="category">Por favor llene todos los campos solicitados, para completar su solicitud de forma exitosa.</p>
		                    	</div>

								<div class="wizard-navigation">
									<div class="progress-with-circle">
									     <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="3" style="width: 21%;"></div>
									</div>
									<ul>
			                            <li class="font-li">
											<a href="#about" data-toggle="tab">
												<div class="icon-circle">
													<i class="fas fa-file-image"></i>
												</div>
												Cargar Mapa
											</a>
										</li>
			                            <li class="font-li">
											<a href="#account" data-toggle="tab">
												<div class="icon-circle">
													<i class="fas fa-map-marked-alt"></i>
												</div>
												Zona de Monitoreo
											</a>
										</li>
			                            <li class="font-li">
											<a href="#address" data-toggle="tab">
												<div class="icon-circle">
													<i class="fas fa-file-invoice"></i>
												</div>
												Datos Adicionales
											</a>
										</li>
			                        </ul>
								</div>
		                        <div class="tab-content">
		                            <div class="tab-pane" id="about">
		                            	<div class="row">
		                            		<div class="file-upload">
											  <button class="btn btn-fill btn-success btn-wd" type="button" onclick="$('.file-upload-input').trigger( 'click' )" style="width:100% !important">Agregar Imagen</button>
											  <div class="image-upload-wrap">
											    <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
											    <div class="drag-text">
											      <h3>Arrastra y suelta tu imagen aqui o selecciona Agregar imagen</h3>
											    </div>
											  </div>
											  <div class="file-upload-content">
											    	<img class="file-upload-image" src="#" alt="your image" />
												    <div class="image-title-wrap">
												      <button type="button" onclick="removeUpload()" class="btn  btn-fill btn-danger btn-wd">Eliminar <span class="image-title">Subir Imagen</span></button>
												    </div>
												</div>
											</div>
										</div>
										  <div class="container">
    <div class="row">
      <div class="col col-6">
        <img id="image" src="{{STATIC_URL}}img/mapaTerreno.png">
      </div>
      <div class="col col-3">
        <div class="preview" style="height: 87.9208px;"><img id="image" src="{{STATIC_URL}}img/mapaTerreno.png" alt="Picture" class="" style="display: block; width: 380.198px; min-width: 0px; min-height: 0px; max-width: none; max-height: none; height: 213.861px; margin-left: -60.5941px; margin-top: -9.60396px;"></div>
      </div>

    </div>

    <h3>Result</h3>
    <p>
      <button type="button" id="button">Crop</button>
    </p>
    <div id="result"><canvas width="622" height="314"></canvas></div>
  </div>
		                            </div>
		                            <div class="tab-pane" id="account">
		                                <h4 class="info-text"> Selecciona el area de monitoreo</h4>
		                                <div class="row">
		                                    <div class="col-sm-offset-2">	
		                                    	<img src="{{ STATIC_URL }}img/planVuelo.jpeg" align="center">
		                                    </div>
		                                </div>
		                            </div>
		                            <div class="tab-pane" id="address">
		                                <div class="row" style="margin-top:20px;">
					                      <div class="col-md-5">
					                        <div class="form-group">
					                          <label class="bmd-label-floating">Nro de Orden</label>
					                          <input type="text" class="form-control" value="1234565667" disabled>
					                        </div>
					                      </div>
					                      <div class="col-md-3">
					                        <div class="form-group">
					                          <label class="bmd-label-floating">Cultivo</label>
					                          <input type="text" class="form-control">
					                        </div>
					                      </div>
					                      <div class="col-md-4">
					                        <div class="form-group">
					                          <label class="bmd-label-floating">Coordenadas</label>
					                          <input type="email" class="form-control">
					                        </div>
					                      </div>
					                   </div>
					                   <div class="row" style="margin-top:20px;">
					                      <div class="col-md-5">
					                        <div class="form-group">
					                          <label class="bmd-label-floating">Fecha de monitoreo</label>
					                          <input type="text" class="form-control" value="">
					                        </div>
					                      </div>
					                      <div class="col-md-3">
					                      	<div class="form-group">
		                                            <label class="bmd-label-floating">Requiere Dron?</label>
	                                            	<select name="dron" class="form-control">
														<option disabled="" selected=""></option>
	                                                	<option value="Si"> Si </option>
	                                                	<option value="No"> No </option>
	                                            	</select>
		                                   	</div>
					                      </div>
					                   </div>
		                        	</div>
		                        <div class="wizard-footer">
		                            <div class="pull-right">
		                                <input type='button' class='btn btn-next btn-fill btn-warning btn-wd' name='next' value='Siguiente' />
		                                <input type='button' class='btn btn-finish btn-fill btn-warning btn-wd' name='finish' value='Finalizar' />
		                            </div>

		                            <div class="pull-left">
		                                <input type='button' class='btn btn-previous btn-default btn-wd' name='previous' value='Atras' />
		                            </div>
		                            <div class="clearfix"></div>
		                        </div>
		                    </form>
		                </div>
		            </div> <!-- wizard container -->
		        </div>
	    	</div><!-- end row -->
</div>

{% endblock content %}

{% block scripts %}
    {{ block.super }}
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
      <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.1.3/cropper.js"></script>
    <script src="{{ STATIC_URL }}js/jquery.bootstrap.wizard.js"></script>
    <script src="{{ STATIC_URL }}js/bootstrap.min.js"></script>
    <script src="{{ STATIC_URL }}js/paper-bootstrap-wizard.js" type="text/javascript"></script>
<!--     <script src="{{ STATIC_URL }}js/bootstrap.min.js"></script> -->
	<script type="text/javascript">
		function readURL(input) {
		  if (input.files && input.files[0]) {

		    var reader = new FileReader();

		    reader.onload = function(e) {
		      $('.image-upload-wrap').hide();

		      $('.file-upload-image').attr('src', e.target.result);
		      $('.file-upload-image').attr('id','image')
		      $('.file-upload-content').show();

		      $('.image-title').html(input.files[0].name);
		    };

		    reader.readAsDataURL(input.files[0]);

		  } else {
		    removeUpload();
		  }
		}

		function removeUpload() {
		  $('.file-upload-input').replaceWith($('.file-upload-input').clone());
		  $('.file-upload-content').hide();
		  $('.image-upload-wrap').show();
		}
		$('.image-upload-wrap').bind('dragover', function () {
		        $('.image-upload-wrap').addClass('image-dropping');
		    });
		    $('.image-upload-wrap').bind('dragleave', function () {
		        $('.image-upload-wrap').removeClass('image-dropping');
		});
	function each(arr, callback) {
      var length = arr.length;
      var i;

      for (i = 0; i < length; i++) {
        callback.call(arr, arr[i], i, arr);
      }

      return arr;
    }

    window.addEventListener('DOMContentLoaded', function () {
      var image = document.querySelector('#image');
      var previews = document.querySelectorAll('.preview');
      var data = document.querySelector('#data');
      var button = document.getElementById('button');
      var result = document.getElementById('result');
      var cropper = new Cropper(image, {
          ready: function () {
            var clone = this.cloneNode();

            clone.className = '';
            clone.style.cssText = (
              'display: block;' +
              'width: 100%;' +
              'min-width: 0;' +
              'min-height: 0;' +
              'max-width: none;' +
              'max-height: none;'
            );

            each(previews, function (elem) {
              elem.appendChild(clone.cloneNode());
            });
          },

          crop: function (event) {
            var data = event.detail;
            var cropper = this.cropper;
            var imageData = cropper.getImageData();
            var previewAspectRatio = data.width / data.height;

            each(previews, function (elem) {
              var previewImage = elem.getElementsByTagName('img').item(0);
              var previewWidth = elem.offsetWidth;
              var previewHeight = previewWidth / previewAspectRatio;
              var imageScaledRatio = data.width / previewWidth;

              elem.style.height = previewHeight + 'px';
              previewImage.style.width = imageData.naturalWidth / imageScaledRatio + 'px';
              previewImage.style.height = imageData.naturalHeight / imageScaledRatio + 'px';
              previewImage.style.marginLeft = -data.x / imageScaledRatio + 'px';
              previewImage.style.marginTop = -data.y / imageScaledRatio + 'px';
            });
          },
        });
      button.onclick = function () {
        result.innerHTML = '';
        result.appendChild(cropper.getCroppedCanvas());
      };
    });
	</script>
{% endblock scripts%}